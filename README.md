# Сервис управления рассылками на Django

## Описание:

Веб-приложение на Django, которое позволяет пользователям управлять рассылками сообщений для клиентов.
Приложение включает функциональность для создания, просмотра, редактирования и удаления рассылок, а также отправки
сообщений по
требованию.

## Установка и настройка:

### Клонируйте репозиторий:

```
https://github.com/hristyaa/DjangoMailingService.git
```

### Создайте виртуальное окружение и установите необходимые зависимости из `pyproject.toml`:

Выполните команду:

```
poetry install
```

Установка конкретных зависимостей (при необходимости):

```
poetry add django 
poetry add dotenv 
poetry add psycopg2-binary
poetry add pillow
poetry add ipython
poetry add redis
```

### Настройка базы данных

Скопируйте файл `.env.example` и переименуйте его в `.env`
Откройте `.env` и заполните ваши данные.

## Запуск сервера:

```
python manage.py runserver
```

После запуска сервера приложение будет доступно по адресу: `http://127.0.0.1:8000/`

### Доступные страницы:

- #### Главная

URL: `http://127.0.0.1:8000/

Описание: Основная страница сервиса управления рассылками

Функционал:

- Навигация по сайту (для авторизованных пользователей: "Главная", "Клиенты", "Сообщения", "Расслылки", "Попытки
  рассылки", "Выход"; для неавторизованных пользователь: "Главная", "Вход", "Регистрация") ;
- Отображение статистики:
  общее количество всех созданных рассылок на сервисе;
  количество активных рассылок на сервисе (со статусом "Запущена");
  количество уникальных получателей (общее число клиентов в системе).
- Кнопка "Начать работу" -> страница авторизации пользователя.

- #### Клиенты (для авторизованных пользователей)

URL: `http://127.0.0.1:8000/clients/`

Функционал:

- На странице выводится список клиентов пользователя (для админа и менеджеров - список всех клинтов);
- У каждого клиента для рассылки есть кнопка "Подробнее" -> детальный просмотр клиента;
- У каждого клиента для рассылки есть кнопка "Редактировать" -> возможность изменить или удалить клиента;
- Кнопка "Добавить клиента" -> возможность добавления нового клиента;
- Менеджеры имеют доступ только к просмотру клиентов всех пользователей.

- #### Сообщения (для авторизованных пользователей)

URL: `http://127.0.0.1:8000/messages/`

Функционал:

- На странице выводится список сообщений для рассылок пользователя(для админа и менеджеров - список всех сообщений);
- У каждого сообщения для рассылки есть кнопка "Подробнее" -> детальный просмотр сообщения;
- У каждого сообщения для рассылки есть кнопка "Редактировать" -> возможность изменить или удалить сообщение;
- Кнопка "Добавить сообщение" -> возможность добавления нового сообщения;
- Менеджеры имеют доступ только к просмотру сообщений всех пользователей.


- #### Рассылки (для авторизованных пользователей)

URL: `http://127.0.0.1:8000/mailings/`

Функционал:

- На странице выводится список рассылок пользователя (для админа и менеджеров - список всех сообщений);
- У каждой рассылки есть кнопка "Подробнее" -> детальный просмотр рассылки;
- У каждой рассылки есть кнопка "Редактировать" -> возможность изменить или удалить рассылку;
- Кнопка "Добавить рассылку" -> возможность добавления новой рассылки;
- Кнопка "Отправить" или "Отправить повторно" (для рассылок со статусами "Создана" или "Запущена") - отправлять рассылку
  всем клиентам рассылки вручную по требованию.
- Менеджеры имеют доступ просмотру рассылок всех пользователей, к отправке по требованию, к отключению рассылки ->
  перевода в статус "Завершена".


- #### Попытки рассылок (для авторизованных пользователей)

URL: `http://127.0.0.1:8000/attempts/`

Функционал:

- На странице выводится список попыток отправок рассылок со статусом попытки (успешно/не успешно), ответом почтового
  сервера, информацией о получателе рассылки, теме рассылки, владельце рассылки;
- Приведена информация о количестве успешных/неуспешных попыток рассылок пользователя и количестве отправленных
  сообщений.
- Менеджер имеет возможность видеть общую статистику сервиса - все попытки отправки рассылок.


- ### Пользователи (для админа и  менеджеров)

URL: `http://127.0.0.1:8000/users/users/`

Функционал:

- На странице выводится список всех пользователей с их информацией;
- Отображается статус активности, блокировки;
- Имеется возможность просмотреть каждого пользователя детально;
- Имеется возможность заблокировать/разблокировать пользователя.

### Регистрация и аутентификация пользователей:
- Реализована система регистрации и аутентификации пользователей.
- Пользователи имеют возможность зарегистрироваться на сайте, подтвердив свой email.
- Реализована функция входа и выхода из системы.
- Предусмотрена возможность восстановления пароля.

### Описание ролей и прав доступа:

Пользователь сервиса: Пользователи могут управлять только своими рассылками и клиентами.

- Создание, просмотр, редактирование и удаление своих клиентов и рассылок.
- Просмотр статистики по своим рассылкам.

Менеджер (персонал, который принадлежит группе "Менеджеры"): Менеджеры могут просматривать все рассылки и клиентов, но
не могут редактировать или удалять чужие данные.

- Просмотр всех клиентов и рассылок.
- Просмотр списка пользователей сервиса.
- Блокировка пользователей сервиса.
- Отключение рассылок.

Запустить команду для наполнения базы данных группой «Менеджеры» (всех пользователей, которые являются персоналом -
is_staff=True):

```
python manage.py create_managers_group
```

Администратор. Запустить команду для создания суперпользователя:

```
python manage.py csu
```

### Кэширование
Настроено серверное и клиентское кэширование для повышения производителености.
Реализован функционал низкоуровневого кэширования для детального просмотра клиента, сообщения и рассылки.


